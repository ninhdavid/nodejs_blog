<div class='mt-4'>
	<h3>Khóa học của đã xóa</h3>
	<a href='/me/stored/courses'>Quay lại danh sách khóa học</a>

	<table class='table'>
		<thead>
			<tr>
				<th scope='col'>#</th>
				<th scope='col'>Tên khóa học</th>
				<th scope='col'>Trình độ</th>
				<th scope='col ' colspan='2'>Thời gian tạo</th>
			</tr>
		</thead>
		<tbody>

			{{#each courses}}
				<tr>
					<th scope='row'>{{sum @index 1}}</th>
					<td>{{this.name}}</td>
					<td>{{this.level}}</td>
					<td>{{this.createdAt}}</td>
					<td><a
							href=''
							class='btn btn-link'
							id='btn-restore-course'
							data-id={{this._id}}
						>Khôi phục</a>
						<a
							href='#'
							class='btn btn-link'
							data-bs-toggle='modal'
							data-bs-target='#delete-course-modal'
							data-id={{this._id}}
						>
							Xóa vĩnh viễn
						</a>
					</td>
				</tr>

			{{else}}
				<tr><td colspan='5' class='text-center'>Thùng rác trống.
						<a href='/me/stored/courses' alt=''>Bấm vào để xóa khóa học</a></td></tr>
			{{/each}}

		</tbody>
	</table>
</div>

{{! Confirm Delete course}}

<!-- Modal -->
<div
	class='modal fade'
	id='delete-course-modal'
	tabindex='-1'
	aria-labelledby='delete-course-modal'
	aria-hidden='true'
>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				<h1 class='modal-title fs-5' id='exampleModalLabel'>Modal title</h1>
				<button
					type='button'
					class='btn-close'
					data-bs-dismiss='modal'
					aria-label='Close'
				></button>
			</div>
			<div class='modal-body'>
				Hành động này không thể khôi phục. Bạn vẫn muốn xóa khóa học?
			</div>
			<div class='modal-footer'>
				<button
					type='button'
					class='btn btn-secondary'
					data-bs-dismiss='modal'
				>Hủy</button>
				<button id='btn-delete-course' type='button' class='btn btn-danger'>Xóa
					bỏ</button>
			</div>
		</div>
	</div>
</div>

<form name='restore-course-form' method='POST'></form>
<form name='delete-course-form' method='POST'></form>

<script>
	var restoreForm=document.forms['restore-course-form']; var restoreBtnAll =
	document.querySelectorAll('#btn-restore-course');
	restoreBtnAll.forEach((restoreBtn) => { restoreBtn.addEventListener('click',
	(e) => { e.preventDefault(); var courseId =
	restoreBtn.getAttribute('data-id'); restoreForm.action = '/courses/' +
	courseId + '/restore?_method=PATCH'; restoreForm.submit(); }); }); var
	DelCourse = document.getElementById('delete-course-modal'); var id; var
	btnDelCourse=document.getElementById('btn-delete-course'); var
	deleteForm=document.forms['delete-course-form'];
	DelCourse.addEventListener('show.bs.modal', event => { var button =
	event.relatedTarget; id = button.getAttribute('data-id'); })
	btnDelCourse.onclick=function(){ deleteForm.action='/courses/'+id+
	'/force?_method=DELETE'; deleteForm.submit(); }
</script>